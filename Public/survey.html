<!DOCTYPE html>
<html>
	<head>
		<title> Friend Finder | Survey </title>
		<meta charset="utf-8">
		<!-- Bootstrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
		<!-- Jquery -->
		<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="" crossorigin="anonymous"> </script>
	</head>

	<body>
		<div class="container">
			<div class="jumbotron">
				<h1 class="text-center"><span class="glyphicon glyphicon-fire"></span> Survey Questions <span class="glyphicon glyphicon-fire"></span></h1>
			</div>	
			<hr>
			<h2 class="text-center"><strong> About You </strong></h2>
			<hr>
			<br>
			<div class="form-group">
    			<h4> Name (required) </h4>
    			<input type="name" class="form-control" id="userName" placeholder="Name">
  			</div>
  			<div class="form-group">
    			<h4> Link to photo image (required) </h4>
    			<input type="img" class="form-control" id="userImage" placeholder="Upload you photo here!">
  			</div>
		</div>
		<div class="col-sm-1"></div><!-- spacer -->
		<div class="col-sm-10">
			<div class="panel panel-default" style=" padding:3%;">
				
				<div class="form-group">
				<label> You see yourself as an emotional person. </label>
				<select class="form-control" id="question01">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->

				<br><br>

				<div class="form-group">
				<label> You are a fan of reading. </label>
				<select class="form-control" id="question02">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->

				<br><br>
				
				<div class="form-group">
				<label> You love being outdoors. </label>
				<select class="form-control" id="question03">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->

				<br><br>

				<div class="form-group">
				<label> You're quick to make friends. </label>
				<select class="form-control" id="question04">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->
				
				<br><br>

				<div class="form-group">
				<label> You like to travel. </label>
				<select class="form-control" id="question05">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->

				<br><br>

				<div class="form-group">
				<label> You consider yourself politically active. </label>
				<select class="form-control" id="question06">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->

				<br><br>

				<div class="form-group">
				<label> You are an active internat user. </label>
				<select class="form-control" id="question07">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->

				<br><br>

				<div class="form-group">
				<label> You are into sports. </label>
				<select class="form-control" id="question08">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->
		
				<br><br>

				<div class="form-group">
				<label> You are a drinker. </label>
				<select class="form-control" id="question09">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->
	
				<br><br>

				<div class="form-group">
				<label> You are an active person. </label>
				<select class="form-control" id="question10">
					<option>1 (strongly disagree)</option>
					<option>2</option>
					<option>3</option>
					<option>4</option>
					<option>5 (strongly agree)</option>
				</select>
				</div><!-- END form-group -->
				<br>
				<hr>
				<!-- Submit Button -->
				<button type="submit" class="btn btn-primary btn-lg" id="submitRequest"> Find a match! </button>
			</div><!-- END panel panel-default -->
		</div><!-- END col-sm-10 -->
		<div class="col-sm-1"></div><!-- spacer -->
		
		<footer class="footer">
 			<div class="container">
   				<p>Control Panel</p>
   				<p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/paradigm1984/friend-finder/tree/master/App">Github Repo</a> | <a href="/home">Home</a> </p>
  			</div>
 		</footer>
	
		<div id="bestFriendModal" class="modal fade" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">X</button>
						<h2 class="modal-title">Best Match</h2>
					</div>
					<div class="modal-body">
					<h2 id="userName"></h2>
					<img id="userImage" src="" width=500px alt="Best Friend">
				</div><!-- END modal-content -->
				<div class="modal-footer">
	        		<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      		</div>
			</div>
		</div><!-- END bestFriendModal -->
	

		<script>

				// on submit, make the modal appear with the name and photo of your best match.
				$("#submitRequest").on("click", function() {

					console.log("requested!!");

					// puts the user input into an object
					var userInput = {

						name: $("#userName").val(),
						photo: $("#userImage").val(),
						scores: [$('#question01').val(), $('#question02').val(), $('#question03').val(), $('#question04').val(), $('#question05').val(), $('#question06').val(), $('#question07').val(), $('#question08').val(), $('#question09').val(), $('#question10').val()]
					}

					// puts the current url into a variable
					var currentURL = window.location.origin;

					console.log("user input: " + userInput);
					// uses jquery to make a post request
					$.post(currentURL + "/api/friends", userInput, function(data) {

						$("#userName").text(data.name);
						$("#userImage").attr("src", data.photo);
						// having trouble with the modals
						$("#bestFriendModal").modal("toggle");
						console.log("posted!");
					}); 

					return false;
				}); // submitRequest on click


		</script>
	</body>
</html>